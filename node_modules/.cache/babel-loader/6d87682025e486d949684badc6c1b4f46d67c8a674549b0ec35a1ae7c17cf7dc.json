{"ast":null,"code":"import React,{useState,useEffect}from'react';import PostDetails from'../components/PostDetails';import ProfilePic from'../components/ProfilePic';import'../css/Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var defultPic='https://img.freepik.com/free-vector/user-circles-set_78370-4704.jpg?size=626&ext=jpg';const[user,setUser]=useState(\"\");const[userGallery,setGallery]=useState([]);const[show,setShow]=useState(false);const[posts,setPosts]=useState([]);const[changePic,setChangePic]=useState(false);const showDetails=()=>{if(show){setShow(false);}else{setShow(true);}};const changeprofile=()=>{if(changePic){setChangePic(false);}else{setChangePic(true);}};useEffect(()=>{const fetchData=async()=>{try{const response=await fetch(\"/user/\".concat(JSON.parse(localStorage.getItem(\"user\"))._id),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}});const responseData=await response.json();setUser(responseData.user);setGallery(responseData.userPost);}catch(err){console.log(err);}};fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{onClick:changeprofile,src:user.Photo?user.Photo:defultPic,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h3\",{children:user.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[userGallery?userGallery.length:\"0\",\" post\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" followings\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:userGallery.map(eachDetails=>{return/*#__PURE__*/_jsx(\"img\",{src:eachDetails.photo,alt:\"gallery\",onClick:()=>{setShow(true);setPosts(eachDetails);}},eachDetails._id);})}),show&&/*#__PURE__*/_jsx(PostDetails,{item:posts,showDetails:showDetails}),changePic&&/*#__PURE__*/_jsx(ProfilePic,{changeprofile:changeprofile})]});}","map":{"version":3,"names":["React","useState","useEffect","PostDetails","ProfilePic","jsx","_jsx","jsxs","_jsxs","Profile","defultPic","user","setUser","userGallery","setGallery","show","setShow","posts","setPosts","changePic","setChangePic","showDetails","changeprofile","fetchData","response","fetch","concat","JSON","parse","localStorage","getItem","_id","headers","Authorization","responseData","json","userPost","err","console","log","className","children","onClick","src","Photo","alt","name","style","display","length","followers","following","width","opacity","margin","map","eachDetails","photo","item"],"sources":["D:/insta-clone/backend/frontend/src/screens/Profile.js"],"sourcesContent":["import React,{useState, useEffect} from 'react'\r\nimport PostDetails from '../components/PostDetails'\r\nimport ProfilePic from '../components/ProfilePic'\r\nimport '../css/Profile.css'\r\n\r\nexport default function Profile() {\r\n  var defultPic = 'https://img.freepik.com/free-vector/user-circles-set_78370-4704.jpg?size=626&ext=jpg'\r\n  const [user, setUser] = useState(\"\")\r\n  const [userGallery, setGallery] = useState([])\r\n  const [show, setShow] = useState(false)\r\n  const [posts, setPosts] = useState([])\r\n  const [changePic, setChangePic] = useState(false)\r\n\r\n  const showDetails = () => {\r\n    if(show){\r\n\r\n      setShow(false)\r\n    }else{\r\n      setShow(true)\r\n    }\r\n  }\r\n\r\n  const changeprofile = () => {\r\n    if (changePic){\r\n      setChangePic(false)\r\n    }else{\r\n      setChangePic(true)\r\n    }\r\n  }\r\n\r\n  useEffect(()=> {\r\n    const fetchData = async () => {\r\n      try{const response = await fetch(`/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`,{\r\n        headers: {\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\r\n        }\r\n      })\r\n      const responseData = await response.json()\r\n      setUser(responseData.user)\r\n      setGallery(responseData.userPost)\r\n      } catch(err){\r\n        console.log(err)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  },[])\r\n  return (\r\n    <div className='profile'>\r\n    <div className=\"profile-frame\">\r\n      <div className=\"profile-pic\">\r\n        <img onClick={changeprofile} src={user.Photo ? user.Photo : defultPic} alt=\"\" />\r\n      </div>\r\n      <div className=\"profile-data\">\r\n        <h3>{user.name}</h3>\r\n        <div className=\"profile-info\" style={{display:\"flex\"}}>\r\n              <p>{userGallery ? userGallery.length:\"0\"} post</p>\r\n              <p>{user.followers ? user.followers.length:\"0\"} followers</p>\r\n              <p>{user.following ? user.following.length: \"0\"} followings</p>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    <hr style={{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}/>\r\n    <div className=\"gallery\">\r\n      {\r\n        userGallery.map((eachDetails)=> {\r\n          return (\r\n            <img src={eachDetails.photo} alt=\"gallery\"\r\n            onClick={()=> {setShow(true)\r\n              setPosts(eachDetails)\r\n            }} \r\n            key={eachDetails._id}/>\r\n          )\r\n        })\r\n      }\r\n    </div>\r\n    {\r\n      show && (\r\n        <PostDetails item={posts} showDetails={showDetails}/>\r\n      )\r\n    }\r\n    {\r\n    changePic && (\r\n        <ProfilePic changeprofile={changeprofile} />\r\n    )\r\n    }\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}