{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import'../css/Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfile(){var defultPic='https://img.freepik.com/free-vector/user-circles-set_78370-4704.jpg?size=626&ext=jpg';const{userid}=useParams();const[user,setUser]=useState(\"\");const[isFollow,setIsFollow]=useState(false);const[posts,setPosts]=useState([]);useEffect(()=>{const fetchData=async()=>{try{const response=await fetch(\"/user/\".concat(userid),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}});const responseData=await response.json();setUser(responseData.user);setPosts(responseData.userPost);if(responseData.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollow(true);}}catch(err){console.log(err);}};fetchData();},[isFollow]);const followUser=async userId=>{const response=await fetch(\"/follow\",{method:'PUT',headers:{'Content-Type':'application/json',Authorization:'Bearer '+localStorage.getItem(\"token\")},body:JSON.stringify({followId:userId})});const data=await response.json();setIsFollow(true);console.log(data);};const unfollowUser=async userId=>{const response=await fetch(\"/unfollow\",{method:'PUT',headers:{'Content-Type':'application/json',Authorization:'Bearer '+localStorage.getItem(\"token\")},body:JSON.stringify({followId:userId})});const data=await response.json();setIsFollow(false);console.log(data);};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo?user.Photo:defultPic,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"h3\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",onClick:()=>{if(isFollow){unfollowUser(user._id);}else{followUser(user._id);}},children:isFollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" post\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" Followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" Following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(eachDetails=>{return/*#__PURE__*/_jsx(\"img\",{src:eachDetails.photo,alt:\"gallery\"},eachDetails._id);})})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","jsx","_jsx","jsxs","_jsxs","UserProfile","defultPic","userid","user","setUser","isFollow","setIsFollow","posts","setPosts","fetchData","response","fetch","concat","headers","Authorization","localStorage","getItem","responseData","json","userPost","followers","includes","JSON","parse","_id","err","console","log","followUser","userId","method","body","stringify","followId","data","unfollowUser","className","children","src","Photo","alt","style","display","alignItems","justifyContent","name","onClick","length","following","width","opacity","margin","map","eachDetails","photo"],"sources":["D:/insta-clone/backend/frontend/src/components/UserProfile.js"],"sourcesContent":["import React,{useState, useEffect} from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport '../css/Profile.css'\r\n\r\nexport default function UserProfile() {\r\n  var defultPic = 'https://img.freepik.com/free-vector/user-circles-set_78370-4704.jpg?size=626&ext=jpg'\r\n  const {userid} = useParams()\r\n  const [user, setUser] = useState(\"\")\r\n  const [isFollow, setIsFollow] = useState(false)\r\n  const [posts, setPosts] = useState([])\r\n  \r\n  useEffect(()=> {\r\n    const fetchData = async () => {\r\n      try{\r\n        const response = await fetch(`/user/${userid}`,{\r\n        headers: {\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\r\n        }\r\n        })\r\n        const responseData = await response.json()\r\n        setUser(responseData.user)\r\n        setPosts(responseData.userPost)\r\n        if (\r\n          responseData.user.followers.includes(\r\n            JSON.parse(localStorage.getItem(\"user\"))._id\r\n          )\r\n        ) {\r\n          setIsFollow(true);\r\n        }\r\n      } catch(err){\r\n        console.log(err)\r\n      }\r\n    }\r\n    fetchData()\r\n  },[isFollow])\r\n\r\n  const followUser = async userId => {\r\n    const response = await fetch(\"/follow\",{\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type':'application/json',\r\n        Authorization: 'Bearer ' + localStorage.getItem(\"token\")\r\n      },\r\n      body: JSON.stringify({\r\n        followId:userId\r\n      })\r\n    })\r\n    const data = await response.json()\r\n    setIsFollow(true)\r\n    console.log(data)\r\n  }\r\n\r\n  const unfollowUser = async userId => {\r\n    const response = await fetch(\"/unfollow\",{\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type':'application/json',\r\n        Authorization: 'Bearer ' + localStorage.getItem(\"token\")\r\n      },\r\n      body: JSON.stringify({\r\n        followId:userId\r\n      })\r\n    })\r\n    const data = await response.json()\r\n    setIsFollow(false)\r\n    console.log(data)\r\n  }\r\n\r\n  return (\r\n    <div className='profile'>\r\n    <div className=\"profile-frame\">\r\n      <div className=\"profile-pic\">\r\n        <img src={user.Photo ? user.Photo : defultPic} alt=\"\" />\r\n      </div>\r\n      <div className=\"profile-data\">\r\n        <div style={{display:'flex', alignItems:'center', justifyContent:'space-between'}}>\r\n          <h3>{user.name}</h3>\r\n          <button className=\"followBtn\"\r\n           onClick={() => {\r\n            if(isFollow){\r\n              unfollowUser(user._id)\r\n            }else{\r\n              followUser(user._id)\r\n            }\r\n          }}\r\n          >\r\n            {isFollow ? \"Unfollow\" : \"Follow\"}\r\n          </button>\r\n        </div>\r\n        <div className=\"profile-info\" style={{display:\"flex\"}}>\r\n              <p>{posts.length} post</p>\r\n              <p>{user.followers ? user.followers.length : \"0\"} Followers</p>\r\n              <p>{user.following ? user.following.length : \"0\"} Following</p>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    <hr style={{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}/>\r\n    <div className=\"gallery\">\r\n      {\r\n        posts.map((eachDetails)=> {\r\n          return (\r\n            <img src={eachDetails.photo} alt=\"gallery\"\r\n            key={eachDetails._id}/>\r\n          )\r\n        })\r\n      }\r\n    </div>\r\n    {/* {\r\n      show && (\r\n        <PostDetails item={posts} showDetails={showDetails}/>\r\n      )\r\n    } */}\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}